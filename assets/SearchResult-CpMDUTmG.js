import{u as I,f as te,g as se,h as U,i as ae,P as Ee,t as le,j as re,k as x,l as f,m as oe,n as J,p as s,q as ie,R as O,s as ne,v as ue,x as Be,C as ce,y as Ae,z as ve,A as he,B as me,D as pe,E as de,F as ye,G as T,H as _,I as ge,J as H,K as Fe}from"./app-DXKPJHsU.js";const De=["/","/algorithm/","/algorithm/%E8%B4%A8%E6%95%B0%E7%AD%9B.html","/components/","/java/","/system%20design/","/algorithm/binarySearch/%E6%B5%85%E6%9E%90%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88%E9%97%AE%E9%A2%98%E6%A8%A1%E5%9E%8B.html","/algorithm/%E4%BA%8C%E5%88%86%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE.html","/algorithm/%E6%8A%BD%E6%A0%B7%E7%AE%97%E6%B3%95/%E6%B4%97%E7%89%8C%20_%20%E8%93%84%E6%B0%B4%E6%B1%A0%E6%8A%BD%E6%A0%B7%E7%AE%97%E6%B3%95.html","/components/docker/docker%E5%90%AF%E5%8A%A8%E5%90%8E%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA.html","/components/%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C.html","/java/jvm/JVM.html","/java/jvm/JVM%E5%B8%B8%E9%87%8F%E6%B1%A0.html","/java/jvm/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.html","/java/%E4%B8%AD%E6%96%AD/java%E7%BA%BF%E7%A8%8B%E4%B8%AD%E6%96%AD%E6%9C%BA%E5%88%B6.html","/system%20design/%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98/%E6%B7%B1%E5%88%86%E9%A1%B5.html","/algorithm/%E6%95%B0%E5%AD%A6%E6%8A%80%E5%B7%A7/%E5%BF%AB%E9%80%9F%E5%B9%82/%E5%BF%AB%E9%80%9F%E5%B9%82.html","/components/git/git%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/git%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html","/components/git/rebase%E4%BD%BF%E7%94%A8%E8%A7%A3%E6%9E%90/rebase%E4%BD%BF%E7%94%A8%E8%A7%A3%E6%9E%90.html","/components/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%9B%B6%E6%8B%B7%E8%B4%9D/%E9%9B%B6%E6%8B%B7%E8%B4%9D.html","/components/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL%E4%BC%98%E5%8C%96/SQL%E8%B0%83%E4%BC%98.html","/components/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95/MySQL%E7%B4%A2%E5%BC%95.html","/components/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%9F%BA%E7%A1%80/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97(MQ)-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html","/404.html","/algorithm/%E4%BA%8C%E5%88%86%E6%B3%95/","/algorithm/%E6%8A%BD%E6%A0%B7%E7%AE%97%E6%B3%95/","/components/docker/","/components/%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/","/java/%E4%B8%AD%E6%96%AD/","/system%20design/%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98/","/algorithm/%E6%95%B0%E5%AD%A6%E6%8A%80%E5%B7%A7/%E5%BF%AB%E9%80%9F%E5%B9%82/","/algorithm/%E6%95%B0%E5%AD%A6%E6%8A%80%E5%B7%A7/","/components/git/git%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","/components/git/","/components/git/rebase%E4%BD%BF%E7%94%A8%E8%A7%A3%E6%9E%90/","/components/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%9B%B6%E6%8B%B7%E8%B4%9D/","/components/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","/components/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL%E4%BC%98%E5%8C%96/","/components/%E6%95%B0%E6%8D%AE%E5%BA%93/","/components/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95/","/components/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%9F%BA%E7%A1%80/","/components/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/","/category/","/category/algorithm/","/category/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/category/java/","/category/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/","/category/db/","/tag/","/tag/%E8%B4%A8%E6%95%B0%E7%AD%9B/","/tag/%E4%BA%8C%E5%88%86%E6%B3%95/","/tag/%E6%8A%BD%E6%A0%B7/","/tag/%E9%9A%8F%E6%9C%BA%E6%8E%92%E5%88%97/","/tag/docker/","/tag/hash/","/tag/%E4%B8%AD%E6%96%AD/","/tag/%E5%88%86%E9%A1%B5/","/tag/%E5%BF%AB%E9%80%9F%E5%B9%82/","/tag/git/","/tag/os/","/tag/sql%E8%B0%83%E4%BC%98/","/tag/db/","/tag/mq/","/article/","/star/","/timeline/"],Ce="SEARCH_PRO_QUERY_HISTORY",p=I(Ce,[]),fe=()=>{const{queryHistoryCount:a}=H,E=a>0;return{enabled:E,queryHistory:p,addQueryHistory:l=>{E&&(p.value=Array.from(new Set([l,...p.value.slice(0,a-1)])))},removeQueryHistory:l=>{p.value=[...p.value.slice(0,l),...p.value.slice(l+1)]}}},b=a=>De[a.id]+("anchor"in a?`#${a.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=H,d=I(He,[]),ke=()=>{const a=$>0;return{enabled:a,resultHistory:d,addResultHistory:E=>{if(a){const l={link:b(E),display:E.display};"header"in E&&(l.header=E.header),d.value=[l,...d.value.slice(0,$-1)]}},removeResultHistory:E=>{d.value=[...d.value.slice(0,E),...d.value.slice(E+1)]}}},Qe=a=>{const E=ce(),l=U(),k=Ae(),o=x(0),F=f(()=>o.value>0),v=ve([]);return he(()=>{const{search:h,terminate:Q}=me(),y=ge(u=>{const g=u.join(" "),{searchFilter:R=A=>A,splitWord:S,suggestionsFilter:L,...m}=E.value;g?(o.value+=1,h(u.join(" "),l.value,m).then(A=>R(A,g,l.value,k.value)).then(A=>{o.value-=1,v.value=A}).catch(A=>{console.warn(A),o.value-=1,o.value||(v.value=[])})):v.value=[]},H.searchDelay-H.suggestDelay);J([a,l],([u])=>y(u),{immediate:!0}),pe(()=>{Q()})}),{isSearching:F,results:v}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:E}){const l=se(),k=U(),o=ae(Ee),{enabled:F,addQueryHistory:v,queryHistory:h,removeQueryHistory:Q}=fe(),{enabled:y,resultHistory:u,addResultHistory:g,removeResultHistory:R}=ke(),S=F||y,L=le(a,"queries"),{results:m,isSearching:A}=Qe(L),r=re({isQuery:!0,index:0}),B=x(0),c=x(0),P=f(()=>S&&(h.value.length>0||u.value.length>0)),q=f(()=>m.value.length>0),j=f(()=>m.value[B.value]||null),V=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?u.value.length-1:h.value.length-1):r.index=t-1},Y=()=>{const{isQuery:e,index:t}=r;t===(e?h.value.length-1:u.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},z=()=>{B.value=B.value>0?B.value-1:m.value.length-1,c.value=j.value.contents.length-1},G=()=>{B.value=B.value<m.value.length-1?B.value+1:0,c.value=0},K=()=>{c.value<j.value.contents.length-1?c.value+=1:G()},N=()=>{c.value>0?c.value-=1:z()},w=e=>e.map(t=>Fe(t)?t:s(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=de[e.index]||"$content",[i,C=""]=ye(t)?t[k.value].split("$content"):t.split("$content");return e.display.map(n=>s("div",w([i,...n,C])))}return e.display.map(t=>s("div",w(t)))},D=()=>{B.value=0,c.value=0,E("updateQuery",""),E("close")},X=()=>F?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.queryHistory),h.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{E("updateQuery",e)}},[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:i=>{i.preventDefault(),i.stopPropagation(),Q(t)}})]))])):null,Z=()=>y?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.resultHistory),u.value.map((e,t)=>s(O,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{D()}},()=>[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(i=>w(i)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:i=>{i.preventDefault(),i.stopPropagation(),R(t)}})]))])):null;return oe("keydown",e=>{if(a.isFocusing){if(q.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=j.value.contents[c.value];v(a.queries.join(" ")),g(t),l.push(b(t)),D()}}else if(y){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(E("updateQuery",h.value[t]),e.preventDefault()):(l.push(u.value[t].link),D())}}}}),J([B,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!q.value:!P.value}],id:"search-pro-results"},a.queries.length?A.value?s(ie,{hint:o.value.searching}):q.value?s("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:t},i)=>{const C=B.value===i;return s("li",{class:["search-pro-result-list-item",{active:C}]},[s("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((n,ee)=>{const M=C&&c.value===ee;return s(O,{to:b(n),class:["search-pro-result-item",{active:M,"aria-selected":M}],onClick:()=>{v(a.queries.join(" ")),g(n),D()}},()=>[n.type==="text"?null:s(n.type==="title"?ne:n.type==="heading"?ue:Be,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?s("div",{class:"content-header"},n.header):null,s("div",W(n))])])})])})):o.value.emptyResult:S?P.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Se as default};
